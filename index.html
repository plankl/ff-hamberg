<!DOCTYPE html>
<html lang='de'>
<head>
  <meta charset='UTF-8'>
  <title>Hydrantenkarte Hamberg</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <link rel='manifest' href='manifest.json'>
  <meta name='theme-color' content='#000000'>
  <link rel='icon' href='icon.png' type='image/png'>
  <link rel='stylesheet' href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css' />
  <style>
    html, body, #map { margin: 0; padding: 0; height: 100%; }
    .legend { position: fixed; bottom: 50px; left: 10px; background: rgba(255,255,255,0.95); padding: 10px 14px; border-radius: 8px; font-size: 14px; z-index: 9999; }
    .legend div { margin: 4px 0; display: flex; align-items: center; }
    .legend-img { width: 20px; height: 20px; margin-right: 8px; }
    .theme-toggle, .orientation-button { position: fixed; right: 10px; background: white; border-radius: 4px; padding: 5px 10px; cursor: pointer; font-weight: bold; z-index: 1000; }
    .theme-toggle { top: 110px; }
    .orientation-button { top: 150px; }
    .map-title { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); background: rgba(255, 255, 255, 0.95); padding: 6px 14px; font-size: 18px; font-weight: bold; border-radius: 6px; z-index: 1001; }
    .footer-info { position: fixed; bottom: 10px; left: 10px; font-size: 12px; background: rgba(255,255,255,0.9); padding: 6px 10px; border-radius: 6px; z-index: 9999; }
  </style>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
</head>
<body>
<div id='map'></div>
<div class="map-title">Freiwillige Feuerwehr Hamberg â€“ Hydrantenkarte</div>
<div class='legend'>
  <div><img src="icons/red-dot.png" class="legend-img"> Ãœberflurhydrant</div>
  <div><img src="icons/blue-dot.png" class="legend-img"> Unterflurhydrant</div>
  <div><img src="icons/green-dot.png" class="legend-img"> Rettungspunkt</div>
  <div><img src="icons/yellow-dot.png" class="legend-img"> WasserbehÃ¤lter</div>
  <div><img src="icons/purple-dot.png" class="legend-img"> Sperrpunkt</div>
</div>
<div class='footer-info'>Erstellt am 17.06.2025</div>
<div class='theme-toggle' onclick='toggleTheme()'>ðŸŒ“ Umschalten</div>
<div class='orientation-button' onclick='enableCompass()'>ðŸ§­ Kompass aktivieren</div>
<script src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'></script>
<script>
  var light = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap' });
  var dark = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', { attribution: 'Â© CartoDB' });

  var map = L.map('map', { center: [49.10951, 11.68453], zoom: 15, layers: [light] });
  var baseLayers = { 'Standard': light, 'Dunkel': dark };
  L.control.layers(baseLayers).addTo(map);

  function toggleTheme() {
    if (map.hasLayer(light)) { map.removeLayer(light); map.addLayer(dark); }
    else if (map.hasLayer(dark)) { map.removeLayer(dark); map.addLayer(light); }
  }

  
        L.marker([49.10951, 11.68453], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant Feuerwehrhaus<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10951,11.68453' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10951,11.68453' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10895, 11.68544], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant SchÃ¶ndorfer Str. 5<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10895,11.68544' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10895,11.68544' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10803, 11.68614], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Zum Spitzberg 3<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10803,11.68614' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10803,11.68614' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10752, 11.68542], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Kreuzung Zum Spitzberg / RÃ¶thenweg<br>Nenndurchmesser DN: 125.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10752,11.68542' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10752,11.68542' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10815, 11.68443], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant RÃ¶thenweg 13<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10815,11.68443' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10815,11.68443' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10693, 11.68444], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Zum Spitzberg 10<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10693,11.68444' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10693,11.68444' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10738, 11.68313], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Sonnenring 14<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10738,11.68313' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10738,11.68313' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10664, 11.68528], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Kiefergasse 5<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10664,11.68528' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10664,11.68528' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10597, 11.68546], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Rascher Str. 13<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10597,11.68546' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10597,11.68546' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.1055, 11.68611], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Rascher Str. 9<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.1055,11.68611' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.1055,11.68611' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10605, 11.6862], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant RÃ¶thenweg 6<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10605,11.6862' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10605,11.6862' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10668, 11.68604], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant RÃ¶thenweg<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10668,11.68604' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10668,11.68604' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10786, 11.68775], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 17<br>Nenndurchmesser DN: 125.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10786,11.68775' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10786,11.68775' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.1068, 11.68672], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant HauptstraÃŸe 28<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.1068,11.68672' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.1068,11.68672' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.1063, 11.68724], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 21b<br>Nenndurchmesser DN: 125.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.1063,11.68724' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.1063,11.68724' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10557, 11.68756], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 25<br>Nenndurchmesser DN: 125.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10557,11.68756' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10557,11.68756' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10483, 11.68749], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant HauptstraÃŸe 29<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10483,11.68749' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10483,11.68749' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10502, 11.68894], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Herrnrieder Str. 2<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10502,11.68894' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10502,11.68894' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10279, 11.68877], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant Eichlberger Str. 12<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10279,11.68877' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10279,11.68877' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10373, 11.6877], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant Eichlberger Str. 3<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10373,11.6877' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10373,11.6877' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.1043, 11.68642], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 35<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.1043,11.68642' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.1043,11.68642' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10412, 11.68603], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 37<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10412,11.68603' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10412,11.68603' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10355, 11.68542], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 41<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10355,11.68542' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10355,11.68542' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10372, 11.68505], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 46<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10372,11.68505' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10372,11.68505' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10288, 11.68749], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Eichlberger Str. 12<br>Nenndurchmesser DN: 125.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10288,11.68749' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10288,11.68749' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10367, 11.68839], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Eichlberger Str. 4<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10367,11.68839' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10367,11.68839' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11046, 11.67008], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant Ã–dberg 1<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11046,11.67008' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11046,11.67008' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11063, 11.67348], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Ã–dberg 3<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11063,11.67348' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11063,11.67348' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.1111, 11.67341], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant Ã–dberg 4<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.1111,11.67341' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.1111,11.67341' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11035, 11.6837], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Sportplatz<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11035,11.6837' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11035,11.6837' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11208, 11.68469], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Kreuzung ReitstraÃŸe/Spanbergweg<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11208,11.68469' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11208,11.68469' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11304, 11.68592], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant Gabelung ReitstraÃŸe/Winner Str.<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11304,11.68592' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11304,11.68592' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11292, 11.68668], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant BushÃ¤uschen SchnÃ¶dorf<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11292,11.68668' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11292,11.68668' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11328, 11.68606], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Winner Str. 1<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11328,11.68606' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11328,11.68606' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11447, 11.6874], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Winner Str. 6<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11447,11.6874' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11447,11.6874' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11339, 11.68766], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant ReitstraÃŸe 20<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11339,11.68766' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11339,11.68766' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11098, 11.68577], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Hohe Trift 5<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11098,11.68577' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11098,11.68577' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11124, 11.68644], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Hohe Trift 2, EinmÃ¼ndung Spanbergweg<br>Nenndurchmesser DN: 150.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11124,11.68644' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11124,11.68644' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11065, 11.68653], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 1<br>Nenndurchmesser DN: 150.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11065,11.68653' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11065,11.68653' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11, 11.68699], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant HauptstraÃŸe 3<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11,11.68699' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11,11.68699' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.1091, 11.68704], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant HauptstraÃŸe 10<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.1091,11.68704' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.1091,11.68704' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10941, 11.68767], {
            icon: L.icon({
                iconUrl: 'icons/yellow-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>WasserbehÃ¤lter</b><br>LÃ¶schwasserbehÃ¤lter Talweg, EinmÃ¼ndung Pfarrgasse<br>Nenndurchmesser DN: nan mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10941,11.68767' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10941,11.68767' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10881, 11.68816], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Pfarrgasse 4<br>Nenndurchmesser DN: 100.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10881,11.68816' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10881,11.68816' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11375, 11.69697], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant Rofen<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11375,11.69697' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11375,11.69697' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11399, 11.69562], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Rofen<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11399,11.69562' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11399,11.69562' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10078, 11.68323], {
            icon: L.icon({
                iconUrl: 'icons/red-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Ãœberflurhydrant</b><br>Ãœberflurhydrant ZiegelhÃ¼tte 1<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10078,11.68323' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10078,11.68323' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10849, 11.68725], {
            icon: L.icon({
                iconUrl: 'icons/blue-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Unterflurhydrant</b><br>Unterflurhydrant Kirche<br>Nenndurchmesser DN: 80.0 mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10849,11.68725' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10849,11.68725' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.092199, 11.70373], {
            icon: L.icon({
                iconUrl: 'icons/green-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Rettungspunkt</b><br>Rettungspunkt Schafsee Hamberg/Eichlberg<br>Nenndurchmesser DN: nan mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.092199,11.70373' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.092199,11.70373' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.086695, 11.66433953], {
            icon: L.icon({
                iconUrl: 'icons/green-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Rettungspunkt</b><br>Rettungspunkt NM-2131 Langenthonhausen<br>Nenndurchmesser DN: nan mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.086695,11.66433953' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.086695,11.66433953' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.10529568, 11.716126], {
            icon: L.icon({
                iconUrl: 'icons/green-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Rettungspunkt</b><br>Rettungspunkt Feuerwehrhaus Herrnried<br>Nenndurchmesser DN: nan mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.10529568,11.716126' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.10529568,11.716126' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.11173709, 11.66721575], {
            icon: L.icon({
                iconUrl: 'icons/green-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Rettungspunkt</b><br>Rettungspunkt NM-2171 Ã–dberg<br>Nenndurchmesser DN: nan mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.11173709,11.66721575' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.11173709,11.66721575' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });
        L.marker([49.12040024, 11.71188973], {
            icon: L.icon({
                iconUrl: 'icons/green-dot.png',
                iconSize: [32, 32],
                iconAnchor: [16, 32]
            })
        }).addTo(map).bindPopup(`<b>Rettungspunkt</b><br>Rettungspunkt NM-2189 B8 Parkplatz<br>Nenndurchmesser DN: nan mm<br>FF Hamberg<br><a href='https://maps.apple.com/?daddr=49.12040024,11.71188973' target='_blank'>Apple Karten</a><br><a href='https://maps.google.com/?daddr=49.12040024,11.71188973' target='_blank'>Google Maps</a>`).on('click', function(e) {
            map.setView(this.getLatLng(), 18);
        });

  let userMarker, cone;
  map.locate({ setView: true, maxZoom: 17 });
  map.on('locationfound', function(e) {
    userMarker = L.circleMarker(e.latlng, {
      radius: 8,
      color: 'red',
      fillColor: '#f03',
      fillOpacity: 0.8
    }).addTo(map).bindPopup('Meine Position').openPopup();

    cone = L.polygon(getConePoints(e.latlng, 0), {
      color: 'orange',
      fillColor: 'orange',
      fillOpacity: 0.3,
      weight: 0
    }).addTo(map);
  });

  function getConePoints(center, angleDeg, radius = 50, spread = 40) {
    const lat = center.lat * Math.PI / 180;
    const lng = center.lng * Math.PI / 180;
    const angleRad = angleDeg * Math.PI / 180;
    const spreadRad = spread * Math.PI / 180;
    const points = [ [center.lat, center.lng] ];
    for (let a = -spreadRad / 2; a <= spreadRad / 2; a += spreadRad / 10) {
      const dx = radius * Math.cos(angleRad + a);
      const dy = radius * Math.sin(angleRad + a);
      const dLat = (dy / 111111);
      const dLng = (dx / (111111 * Math.cos(lat)));
      points.push([center.lat + dLat, center.lng + dLng]);
    }
    return points;
  }

  function setupOrientationListener() {
    window.addEventListener("deviceorientation", function(event) {
      if (cone && userMarker && event.alpha != null) {
        cone.setLatLngs(getConePoints(userMarker.getLatLng(), (event.alpha + 90) % 360));
      }
    }, true);
  }

  function enableCompass() {
    if (typeof DeviceOrientationEvent !== "undefined" &&
        typeof DeviceOrientationEvent.requestPermission === "function") {
      DeviceOrientationEvent.requestPermission()
        .then(permissionState => {
          if (permissionState === "granted") {
            setupOrientationListener();
            alert("Kompass aktiviert!");
          } else {
            alert("Kompass-Zugriff wurde abgelehnt.");
          }
        })
        .catch(error => {
          alert("Fehler beim Anfordern der Kompass-Berechtigung.");
          console.error(error);
        });
    } else {
      setupOrientationListener();
    }
  }
</script>
</body>
</html>